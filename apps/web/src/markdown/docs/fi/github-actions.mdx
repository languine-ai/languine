# GitHub Actions

GitHub-toiminnolla voit helposti kääntää koodiasi yksinkertaisesti työntämällä koodisi repositorioon, jolloin GitHub-toiminto kääntää uudet avaimet, luo pull-pyynnön tai sitoo muutoksesi.
Tämä säästää sinulta paljon aikaa ja vaivannäköä samalla kun säilyttää korkealaatuiset käännökset.

---

## Asennus

Käyttääksesi Languine GitHub-toimintoa repositoriossasi, sinun on:

1. Määritettävä repositoriosi salaisuudet Languine-tunnuksillasi
2. Luotava työnkulku-tiedosto repositoriosi

### Repositorion salaisuuksien määrittäminen

Lisää seuraavat salaisuudet repositoriosi asetuksiin (Asetukset > Salaisuudet ja muuttujat > Toiminnot):

- `LANGUINE_API_KEY`: Languine API -avain
- `LANGUINE_PROJECT_ID`: Languine projektin ID

Voit löytää nämä arvot Languine-hallintapaneelista Projektin asetukset -kohdasta.



### Ympäristömuuttujat

GitHub-toiminto käyttää seuraavia ympäristömuuttujia:
- `LANGUINE_API_KEY` (Pakollinen): Languine API -avain todennusta varten
- `LANGUINE_PROJECT_ID` (Pakollinen): Languine projektin ID 
- `GITHUB_TOKEN` (Pakollinen): GitHubin automaattisesti tarjoama, käytetään PR:ien luomiseen

### Esimerkki työnkulusta

Luo uusi tiedosto .github/workflows/languine.yml repositoriosi seuraavalla sisällöllä:

```ts title=".github/workflows/release.yml"
name: Julkaise verkkosivusto

on:
  push:
    branches:
      - '**'
    paths:
      - apps/web/**

jobs:
  translate:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
      
      - name: Languine-toiminto
        uses: languine/languine-action@v1
        env:
           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          api-key: ${{ secrets.LANGUINE_API_KEY }}
          project-id: ${{ secrets.LANGUINE_PROJECT_ID }}
```
 
 Tämä työnkulku:
- Suoritetaan päähaaraan tehtävien työntämisen yhteydessä
- Suoritetaan pull-pyynnöissä päähaaraan
- Voidaan laukaista manuaalisesti Toiminnot-välilehdeltä
- Tarkistaa koodisi ja suorittaa Languine-käännösprosessin
- Luo pull-pyynnön kaikista uusista käännöksistä (konfiguroitavissa)

#### Työhakemiston vaihtoehto

`working-directory`-vaihtoehto mahdollistaa sen, että voit määrittää, missä käännöstiedostosi sijaitsevat. Tämä on erityisen hyödyllistä monorepoissa, joissa käännöksesi voivat olla tietyssä paketti- tai sovellushakemistossa. Esimerkiksi:

#### Pull-pyyntö -vaihtoehto

`create-pull-request`-vaihtoehto ohjaa, luoko toiminto pull-pyynnön muutoksista vai sitooko ne suoraan haaraan:

```typescript title=".github/workflows/languine.yml"
with:
  create-pull-request: true # luo pull-pyyntö muutoksista
```

Kun se on asetettu `true`, toiminto:
- Luo uuden haara muutoksilla
- Luo pull-pyynnön tarkistettavaksi
- Lisää asianmukaiset tarrat ja kuvauksen

Kun se on asetettu `false` (oletusarvo), toiminto:
- Sitoo muutokset suoraan nykyiseen haaraan
- Työntää muutokset ilman pull-pyynnön luomista