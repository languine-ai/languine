# GitHub Actions

通过 GitHub Action，您可以轻松地通过将代码推送到代码库来翻译您的代码，GitHub Action 将翻译您的新键，创建拉取请求或提交更改。
这为您节省了大量时间和精力，同时保持高质量的翻译。

---

## 安装

要在您的代码库中使用 Languine GitHub Action，您需要：

1. 使用您的 Languine 凭据设置代码库的机密
2. 在您的代码库中创建一个工作流文件

### 设置代码库机密

在您的代码库设置中添加以下机密（设置 > 机密和变量 > 操作）：

- `LANGUINE_API_KEY`：您的 Languine API 密钥
- `LANGUINE_PROJECT_ID`：您的 Languine 项目 ID

您可以在 Languine 仪表板的项目设置中找到这些值。



### 环境变量

GitHub Action 使用以下环境变量：
- `LANGUINE_API_KEY`（必需）：用于身份验证的 Languine API 密钥
- `LANGUINE_PROJECT_ID`（必需）：您的 Languine 项目 ID 
- `GITHUB_TOKEN`（必需）：由 GitHub 自动提供，用于创建 PR

### 示例工作流

在您的代码库中创建一个新文件 .github/workflows/languine.yml，内容如下：

```ts title=".github/workflows/release.yml"
name: 部署网站

on:
  push:
    branches:
      - '**'
    paths:
      - apps/web/**

jobs:
  translate:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
      
      - name: Languine Action
        uses: languine/languine-action@v1
        env:
           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          api-key: ${{ secrets.LANGUINE_API_KEY }}
          project-id: ${{ secrets.LANGUINE_PROJECT_ID }}
```
 
 此工作流将：
- 在推送到主分支时运行
- 在对主分支的拉取请求时运行
- 可以从操作选项卡手动触发
- 检出您的代码并运行 Languine 翻译过程
- 创建一个包含任何新翻译的拉取请求（可配置）

#### 工作目录选项

`working-directory` 选项允许您指定翻译文件的位置。这在单一代码库中特别有用，因为您的翻译可能位于特定的包或应用程序目录中。例如：

#### 拉取请求选项

`create-pull-request` 选项控制操作是否创建包含更改的拉取请求或直接将其提交到分支：

```typescript title=".github/workflows/languine.yml"
with:
  create-pull-request: true # 创建一个包含更改的拉取请求
```

当设置为 `true` 时，操作将：
- 创建一个包含更改的新分支
- 创建一个供审查的拉取请求
- 添加适当的标签和描述

当设置为 `false`（默认）时，操作将：
- 将更改直接提交到当前分支
- 在不创建拉取请求的情况下推送更改